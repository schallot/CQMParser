<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WinMerge File Compare Report</title>
<style type="text/css">
<!--
table {margin: 0; border: 1px solid #a0a0a0; box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.15);}
td,th {word-break: break-all; font-size: 12pt;padding: 0 3px;}
tr { vertical-align: top; }
.title {color: white; background-color: blue; vertical-align: top; padding: 4px 4px; background: linear-gradient(mediumblue, darkblue);}
.sf3b2 {color: #000000; background-color: #ffffff; }
.sf3b5 {color: #000000; background-color: #0078d7; }
.sf3b14 {color: #000000; background-color: #ffa0a0; }
.sf3b16 {color: #000000; background-color: #f1e2ad; }
.sf3b18 {color: #000000; background-color: #ffaa82; }
.sf3b19 {color: #000000; background-color: #c8816c; }
.sf6b2 {color: #ffffff; background-color: #ffffff; }
.sf6b5 {color: #ffffff; background-color: #0078d7; }
.sf6b14 {color: #ffffff; background-color: #ffa0a0; }
.sf6b16 {color: #ffffff; background-color: #f1e2ad; }
.sf6b18 {color: #ffffff; background-color: #ffaa82; }
.sf6b19 {color: #ffffff; background-color: #c8816c; }
.sf7b2 {color: #0000ff; background-color: #ffffff; font-weight: bold; }
.sf7b5 {color: #0000ff; background-color: #0078d7; font-weight: bold; }
.sf7b14 {color: #0000ff; background-color: #ffa0a0; font-weight: bold; }
.sf7b16 {color: #0000ff; background-color: #f1e2ad; font-weight: bold; }
.sf7b18 {color: #0000ff; background-color: #ffaa82; font-weight: bold; }
.sf7b19 {color: #0000ff; background-color: #c8816c; font-weight: bold; }
.sf8b2 {color: #800080; background-color: #ffffff; }
.sf8b5 {color: #800080; background-color: #0078d7; }
.sf8b14 {color: #800080; background-color: #ffa0a0; }
.sf8b16 {color: #800080; background-color: #f1e2ad; }
.sf8b18 {color: #800080; background-color: #ffaa82; }
.sf8b19 {color: #800080; background-color: #c8816c; }
.sf9b2 {color: #008000; background-color: #ffffff; }
.sf9b5 {color: #008000; background-color: #0078d7; }
.sf9b14 {color: #008000; background-color: #ffa0a0; }
.sf9b16 {color: #008000; background-color: #f1e2ad; }
.sf9b18 {color: #008000; background-color: #ffaa82; }
.sf9b19 {color: #008000; background-color: #c8816c; }
.sf10b2 {color: #ff0000; background-color: #ffffff; }
.sf10b5 {color: #ff0000; background-color: #0078d7; }
.sf10b14 {color: #ff0000; background-color: #ffa0a0; }
.sf10b16 {color: #ff0000; background-color: #f1e2ad; }
.sf10b18 {color: #ff0000; background-color: #ffaa82; }
.sf10b19 {color: #ff0000; background-color: #c8816c; }
.sf11b2 {color: #606060; background-color: #ffffff; }
.sf11b5 {color: #606060; background-color: #0078d7; }
.sf11b14 {color: #606060; background-color: #ffa0a0; }
.sf11b16 {color: #606060; background-color: #f1e2ad; }
.sf11b18 {color: #606060; background-color: #ffaa82; }
.sf11b19 {color: #606060; background-color: #c8816c; }
.sf12b2 {color: #800000; background-color: #ffffff; }
.sf12b5 {color: #800000; background-color: #0078d7; }
.sf12b14 {color: #800000; background-color: #ffa0a0; }
.sf12b16 {color: #800000; background-color: #f1e2ad; }
.sf12b18 {color: #800000; background-color: #ffaa82; }
.sf12b19 {color: #800000; background-color: #c8816c; }
.sf13b2 {color: #0080c0; background-color: #ffffff; }
.sf13b5 {color: #0080c0; background-color: #0078d7; }
.sf13b14 {color: #0080c0; background-color: #ffa0a0; }
.sf13b16 {color: #0080c0; background-color: #f1e2ad; }
.sf13b18 {color: #0080c0; background-color: #ffaa82; }
.sf13b19 {color: #0080c0; background-color: #c8816c; }
.sf15b2 {color: #000000; background-color: #ffffff; }
.sf15b5 {color: #000000; background-color: #0078d7; }
.sf15b14 {color: #000000; background-color: #ffa0a0; }
.sf15b16 {color: #000000; background-color: #f1e2ad; }
.sf15b18 {color: #000000; background-color: #ffaa82; }
.sf15b19 {color: #000000; background-color: #c8816c; }
.sf17b2 {color: #000000; background-color: #ffffff; }
.sf17b5 {color: #000000; background-color: #0078d7; }
.sf17b14 {color: #000000; background-color: #ffa0a0; }
.sf17b16 {color: #000000; background-color: #f1e2ad; }
.sf17b18 {color: #000000; background-color: #ffaa82; }
.sf17b19 {color: #000000; background-color: #c8816c; }
.sf20b2 {color: #000080; background-color: #ffffff; }
.sf20b5 {color: #000080; background-color: #0078d7; }
.sf20b14 {color: #000080; background-color: #ffa0a0; }
.sf20b16 {color: #000080; background-color: #f1e2ad; }
.sf20b18 {color: #000080; background-color: #ffaa82; }
.sf20b19 {color: #000080; background-color: #c8816c; }
.sf21b2 {color: #0080c0; background-color: #ffffff; }
.sf21b5 {color: #0080c0; background-color: #0078d7; }
.sf21b14 {color: #0080c0; background-color: #ffa0a0; }
.sf21b16 {color: #0080c0; background-color: #f1e2ad; }
.sf21b18 {color: #0080c0; background-color: #ffaa82; }
.sf21b19 {color: #0080c0; background-color: #c8816c; }
.ln {text-align: right; word-break: normal; color: #000000; background-color: #f0f0f0;}
-->
</style>
</head>
<body>
<table cellspacing="0" cellpadding="0" style="width:100%;">
<thead>
<tr>
<th colspan="2" class="title" style="width:50.000000%">C:\code\CQMParser\CompiledMeasures\CMS460v1.txt</th>
<th colspan="2" class="title" style="width:50.000000%">C:\code\CQMParser\CompiledMeasures\CMS460v2.txt</th>
</tr>
</thead>
<tbody>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Initial Population:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Initial Population:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d1" href="#d1">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">exists ( [("Patient Characteristic Birthdate: Birth date" using "Birth date (LOINC Code 21112-8)")] BirthDate</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists ( [("Patient Characteristic Birthdate: Birth date" using "Birth date (LOINC Code 21112-8)")] BirthDate</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Global.CalendarAgeInYearsAt</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">BirthDate.b<wbr>irthDatetime, start of Measurement Period</span><span style="color: #000000; background-color: #efcb05; ">)</span><span style="color: #000000; background-color: #efcb05; ">&gt;= 18</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; where Global.CalendarAgeInYearsAt</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">BirthDate.birthDatetime, start of Measurement Period</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">&gt;= 18</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; and </span><span style="color: #000000; background-color: #efcb05; ">exists ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; and </span><span class="sf17b18">( </span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">( </span><span style="color: #000000; background-color: #efcb05; ">[("Encounter, Performed: Face to Face Interaction - No ED" using "Face to Face Interaction - No ED (2.16.840.1.113762.1.4.1080.2)")]</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists ( </span><span style="color: #000000; background-color: #efcb05; ">[("Encounter, Performed: Face to Face Interaction - No ED" using "Face to Face Interaction - No ED (2.16.840.1.113762.1.4.1080.2)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Office Visit" using "Office Visit (2.16.840.1.113883.3.464.1003.101.12.10<wbr>01)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Office Visit" using "Office Visit (2.16.840.1.113883.3.464.1003.101.12.10<wbr>01)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services - Established Office Visit, 18 and Up" using "Preventive Care Services - Established Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>25)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services - Established Office Visit, 18 and Up" using "Preventive Care Services - Established Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>25)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services-Initial Office Visit, 18 and Up" using "Preventive Care Services-Initial Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>23)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services-Initial Office Visit, 18 and Up" using "Preventive Care Services-Initial Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>23)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Outpatient Consultation" using "Outpatient Consultation (2.16.840.1.113883.3.464.1003.101.12.10<wbr>08)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Outpatient Consultation" using "Outpatient Consultation (2.16.840.1.113883.3.464.1003.101.12.10<wbr>08)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services - Other" using "Preventive Care Services - Other (2.16.840.1.113883.3.464.1003.101.12.10<wbr>30)")] ) QualifyingEncounter</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services - Other" using "Preventive Care Services - Other (2.16.840.1.113883.3.464.1003.101.12.10<wbr>30)")] ) QualifyingEncounter</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where QualifyingEncounter.relevantPeriod during Measurement Period )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where QualifyingEncounter.relevantPeriod during Measurement Period )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; and exists ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; and exists ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d2" href="#d2">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d3" href="#d3">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d4" href="#d4">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d5" href="#d5">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d6" href="#d6">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d7" href="#d7">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d8" href="#d8">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d9" href="#d9">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d10" href="#d10">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d11" href="#d11">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d12" href="#d12">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d13" href="#d13">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d14" href="#d14">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d15" href="#d15">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d16" href="#d16">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d17" href="#d17">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d18" href="#d18">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d19" href="#d19">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d20" href="#d20">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d21" href="#d21">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d22" href="#d22">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d23" href="#d23">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d24" href="#d24">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d25" href="#d25">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d26" href="#d26">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d27" href="#d27">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d28" href="#d28">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d29" href="#d29">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d30" href="#d30">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d31" href="#d31">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d32" href="#d32">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d33" href="#d33">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d34" href="#d34">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d35" href="#d35">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d36" href="#d36">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d37" href="#d37">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d38" href="#d38">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d39" href="#d39">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d40" href="#d40">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d41" href="#d41">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d42" href="#d42">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d43" href="#d43">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d44" href="#d44">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d45" href="#d45">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d46" href="#d46">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d47" href="#d47">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d48" href="#d48">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d49" href="#d49">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d50" href="#d50">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d51" href="#d51">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d52" href="#d52">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d53" href="#d53">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d54" href="#d54">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d55" href="#d55">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d56" href="#d56">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d57" href="#d57">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d58" href="#d58">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d59" href="#d59">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d60" href="#d60">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d61" href="#d61">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d62" href="#d62">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d63" href="#d63">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d64" href="#d64">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d65" href="#d65">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d66" href="#d66">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d67" href="#d67">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d68" href="#d68">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d69" href="#d69">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d70" href="#d70">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d71" href="#d71">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d72" href="#d72">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d73" href="#d73">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d74" href="#d74">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d75" href="#d75">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d76" href="#d76">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d77" href="#d77">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d78" href="#d78">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d79" href="#d79">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d80" href="#d80">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d81" href="#d81">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d82" href="#d82">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d83" href="#d83">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d84" href="#d84">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d85" href="#d85">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d86" href="#d86">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */ </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">*/ </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d87" href="#d87">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d88" href="#d88">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d89" href="#d89">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d90" href="#d90">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d91" href="#d91">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d92" href="#d92">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d93" href="#d93">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d94" href="#d94">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d95" href="#d95">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d96" href="#d96">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d97" href="#d97">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d98" href="#d98">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d99" href="#d99">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d100" href="#d100">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d101" href="#d101">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d102" href="#d102">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d103" href="#d103">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d104" href="#d104">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d105" href="#d105">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d106" href="#d106">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d107" href="#d107">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d108" href="#d108">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d109" href="#d109">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d110" href="#d110">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d111" href="#d111">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d112" href="#d112">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d113" href="#d113">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d114" href="#d114">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d115" href="#d115">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d116" href="#d116">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d117" href="#d117">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d118" href="#d118">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d119" href="#d119">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d120" href="#d120">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d121" href="#d121">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d122" href="#d122">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d123" href="#d123">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d124" href="#d124">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d125" href="#d125">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d126" href="#d126">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d127" href="#d127">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d128" href="#d128">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d129" href="#d129">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d130" href="#d130">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d131" href="#d131">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d132" href="#d132">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d133" href="#d133">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d134" href="#d134">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d135" href="#d135">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d136" href="#d136">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d137" href="#d137">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d138" href="#d138">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d139" href="#d139">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d140" href="#d140">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d141" href="#d141">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d142" href="#d142">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d143" href="#d143">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d144" href="#d144">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d145" href="#d145">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d146" href="#d146">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d147" href="#d147">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d148" href="#d148">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d149" href="#d149">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d150" href="#d150">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d151" href="#d151">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d152" href="#d152">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d153" href="#d153">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d154" href="#d154">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d155" href="#d155">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d156" href="#d156">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d157" href="#d157">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d158" href="#d158">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d159" href="#d159">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d160" href="#d160">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d161" href="#d161">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d162" href="#d162">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d163" href="#d163">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d164" href="#d164">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d165" href="#d165">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d166" href="#d166">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d167" href="#d167">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d168" href="#d168">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d169" href="#d169">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d170" href="#d170">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d171" href="#d171">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d172" href="#d172">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d173" href="#d173">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d174" href="#d174">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d175" href="#d175">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d176" href="#d176">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d177" href="#d177">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d178" href="#d178">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d179" href="#d179">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d180" href="#d180">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d181" href="#d181">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d182" href="#d182">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d183" href="#d183">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d184" href="#d184">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d185" href="#d185">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d186" href="#d186">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d187" href="#d187">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d188" href="#d188">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d189" href="#d189">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d190" href="#d190">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d191" href="#d191">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d192" href="#d192">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d193" href="#d193">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d194" href="#d194">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d195" href="#d195">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d196" href="#d196">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d197" href="#d197">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d198" href="#d198">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d199" href="#d199">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d200" href="#d200">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d201" href="#d201">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d202" href="#d202">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d203" href="#d203">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d204" href="#d204">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d205" href="#d205">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d206" href="#d206">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d207" href="#d207">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d208" href="#d208">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d209" href="#d209">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d210" href="#d210">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d211" href="#d211">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; let Med</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; let Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d212" href="#d212">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d213" href="#d213">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d214" href="#d214">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d215" href="#d215">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d216" href="#d216">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } Opioid</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } Opioid</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d217" href="#d217">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d218" href="#d218">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; period: Period</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; period: Period</span><span class="sf17b18">sWithAllowedGaps</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmd: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; cmd: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d219" href="#d219">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all duration in days of Period</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return all duration in days of Period</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d220" href="#d220">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d221" href="#d221">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; } Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; } Period</span><span class="sf17b18">sWithGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Period</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 )</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Period</span><span class="sf17b18">sWithGaps</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d222" href="#d222">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">exists ( [("Patient Characteristic Birthdate: Birth date" using "Birth date (LOINC Code 21112-8)")] BirthDate</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists ( [("Patient Characteristic Birthdate: Birth date" using "Birth date (LOINC Code 21112-8)")] BirthDate</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Global.CalendarAgeInYearsAt</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">BirthDate.b<wbr>irthDatetime, start of Measurement Period</span><span style="color: #000000; background-color: #efcb05; ">)</span><span style="color: #000000; background-color: #efcb05; ">&gt;= 18</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; where Global.CalendarAgeInYearsAt</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">BirthDate.birthDatetime, start of Measurement Period</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">&gt;= 18</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; and </span><span style="color: #000000; background-color: #efcb05; ">exists ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; and </span><span class="sf17b18">( </span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">( </span><span style="color: #000000; background-color: #efcb05; ">[("Encounter, Performed: Face to Face Interaction - No ED" using "Face to Face Interaction - No ED (2.16.840.1.113762.1.4.1080.2)")]</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists ( </span><span style="color: #000000; background-color: #efcb05; ">[("Encounter, Performed: Face to Face Interaction - No ED" using "Face to Face Interaction - No ED (2.16.840.1.113762.1.4.1080.2)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Office Visit" using "Office Visit (2.16.840.1.113883.3.464.1003.101.12.10<wbr>01)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Office Visit" using "Office Visit (2.16.840.1.113883.3.464.1003.101.12.10<wbr>01)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services - Established Office Visit, 18 and Up" using "Preventive Care Services - Established Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>25)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services - Established Office Visit, 18 and Up" using "Preventive Care Services - Established Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>25)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services-Initial Office Visit, 18 and Up" using "Preventive Care Services-Initial Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>23)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services-Initial Office Visit, 18 and Up" using "Preventive Care Services-Initial Office Visit, 18 and Up (2.16.840.1.113883.3.464.1003.101.12.10<wbr>23)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Outpatient Consultation" using "Outpatient Consultation (2.16.840.1.113883.3.464.1003.101.12.10<wbr>08)")]</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Outpatient Consultation" using "Outpatient Consultation (2.16.840.1.113883.3.464.1003.101.12.10<wbr>08)")]</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union [("Encounter, Performed: Preventive Care Services - Other" using "Preventive Care Services - Other (2.16.840.1.113883.3.464.1003.101.12.10<wbr>30)")] ) QualifyingEncounter</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union [("Encounter, Performed: Preventive Care Services - Other" using "Preventive Care Services - Other (2.16.840.1.113883.3.464.1003.101.12.10<wbr>30)")] ) QualifyingEncounter</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where QualifyingEncounter.relevantPeriod during Measurement Period )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where QualifyingEncounter.relevantPeriod during Measurement Period )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; and exists ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; and exists ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d223" href="#d223">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d224" href="#d224">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d225" href="#d225">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d226" href="#d226">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d227" href="#d227">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d228" href="#d228">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d229" href="#d229">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d230" href="#d230">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d231" href="#d231">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d232" href="#d232">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d233" href="#d233">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d234" href="#d234">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d235" href="#d235">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d236" href="#d236">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d237" href="#d237">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d238" href="#d238">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d239" href="#d239">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d240" href="#d240">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d241" href="#d241">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d242" href="#d242">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d243" href="#d243">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d244" href="#d244">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d245" href="#d245">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d246" href="#d246">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d247" href="#d247">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d248" href="#d248">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d249" href="#d249">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d250" href="#d250">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d251" href="#d251">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d252" href="#d252">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d253" href="#d253">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d254" href="#d254">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d255" href="#d255">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d256" href="#d256">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d257" href="#d257">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d258" href="#d258">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d259" href="#d259">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d260" href="#d260">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d261" href="#d261">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d262" href="#d262">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d263" href="#d263">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d264" href="#d264">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d265" href="#d265">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d266" href="#d266">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d267" href="#d267">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d268" href="#d268">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d269" href="#d269">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d270" href="#d270">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d271" href="#d271">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d272" href="#d272">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d273" href="#d273">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d274" href="#d274">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d275" href="#d275">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d276" href="#d276">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d277" href="#d277">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d278" href="#d278">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d279" href="#d279">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d280" href="#d280">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d281" href="#d281">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d282" href="#d282">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d283" href="#d283">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d284" href="#d284">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d285" href="#d285">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d286" href="#d286">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d287" href="#d287">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d288" href="#d288">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d289" href="#d289">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d290" href="#d290">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d291" href="#d291">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d292" href="#d292">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d293" href="#d293">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d294" href="#d294">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d295" href="#d295">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d296" href="#d296">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d297" href="#d297">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d298" href="#d298">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d299" href="#d299">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d300" href="#d300">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d301" href="#d301">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d302" href="#d302">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d303" href="#d303">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d304" href="#d304">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d305" href="#d305">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d306" href="#d306">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d307" href="#d307">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */ </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">*/ </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d308" href="#d308">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d309" href="#d309">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d310" href="#d310">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d311" href="#d311">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d312" href="#d312">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d313" href="#d313">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d314" href="#d314">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d315" href="#d315">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d316" href="#d316">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d317" href="#d317">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d318" href="#d318">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d319" href="#d319">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d320" href="#d320">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d321" href="#d321">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d322" href="#d322">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d323" href="#d323">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d324" href="#d324">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d325" href="#d325">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d326" href="#d326">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d327" href="#d327">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d328" href="#d328">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d329" href="#d329">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d330" href="#d330">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d331" href="#d331">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d332" href="#d332">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d333" href="#d333">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d334" href="#d334">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d335" href="#d335">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d336" href="#d336">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d337" href="#d337">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d338" href="#d338">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d339" href="#d339">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d340" href="#d340">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d341" href="#d341">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d342" href="#d342">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d343" href="#d343">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d344" href="#d344">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d345" href="#d345">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d346" href="#d346">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d347" href="#d347">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d348" href="#d348">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d349" href="#d349">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d350" href="#d350">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d351" href="#d351">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d352" href="#d352">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d353" href="#d353">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d354" href="#d354">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d355" href="#d355">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d356" href="#d356">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d357" href="#d357">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d358" href="#d358">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d359" href="#d359">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d360" href="#d360">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d361" href="#d361">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d362" href="#d362">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d363" href="#d363">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d364" href="#d364">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d365" href="#d365">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d366" href="#d366">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d367" href="#d367">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d368" href="#d368">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d369" href="#d369">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d370" href="#d370">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d371" href="#d371">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d372" href="#d372">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d373" href="#d373">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d374" href="#d374">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d375" href="#d375">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d376" href="#d376">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d377" href="#d377">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d378" href="#d378">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d379" href="#d379">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d380" href="#d380">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d381" href="#d381">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d382" href="#d382">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d383" href="#d383">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d384" href="#d384">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d385" href="#d385">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d386" href="#d386">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d387" href="#d387">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d388" href="#d388">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d389" href="#d389">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d390" href="#d390">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d391" href="#d391">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d392" href="#d392">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d393" href="#d393">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d394" href="#d394">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d395" href="#d395">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d396" href="#d396">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d397" href="#d397">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d398" href="#d398">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d399" href="#d399">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d400" href="#d400">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d401" href="#d401">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d402" href="#d402">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d403" href="#d403">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d404" href="#d404">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d405" href="#d405">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d406" href="#d406">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d407" href="#d407">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d408" href="#d408">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d409" href="#d409">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d410" href="#d410">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d411" href="#d411">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d412" href="#d412">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d413" href="#d413">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d414" href="#d414">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d415" href="#d415">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d416" href="#d416">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d417" href="#d417">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d418" href="#d418">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d419" href="#d419">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d420" href="#d420">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d421" href="#d421">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d422" href="#d422">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d423" href="#d423">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d424" href="#d424">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d425" href="#d425">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d426" href="#d426">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d427" href="#d427">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d428" href="#d428">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d429" href="#d429">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d430" href="#d430">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d431" href="#d431">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d432" href="#d432">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; let Med</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; let Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d433" href="#d433">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d434" href="#d434">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d435" href="#d435">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d436" href="#d436">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d437" href="#d437">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } Opioid</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } Opioid</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d438" href="#d438">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d439" href="#d439">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; period: Period</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; period: Period</span><span class="sf17b18">sWithAllowedGaps</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmd: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; cmd: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d440" href="#d440">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all duration in days of Period</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return all duration in days of Period</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d441" href="#d441">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d442" href="#d442">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; } Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; } Period</span><span class="sf17b18">sWithGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Period</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 )</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Period</span><span class="sf17b18">sWithGaps</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator Exclusions:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator Exclusions:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d443" href="#d443">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">exists ( </span><span class="sf17b18">( </span><span style="color: #000000; background-color: #efcb05; ">[("Intervention, Order: Palliative </span><span style="color: #000000; background-color: #efcb05; ">Care" using "Palliative </span><span style="color: #000000; background-color: #efcb05; ">Care (2.16.840.1.113</span><span class="sf17b16">762</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">1</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">4</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span class="sf17b18">111</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span class="sf17b16">62</span><span style="color: #000000; background-color: #efcb05; ">)")]</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists ( </span><span style="color: #000000; background-color: #efcb05; ">[("Intervention, Order: Palliative </span><span class="sf17b18">or Hospice </span><span style="color: #000000; background-color: #efcb05; ">Care" using "Palliative </span><span class="sf17b18">or Hospice </span><span style="color: #000000; background-color: #efcb05; ">Care (2.16.840.1.113</span><span class="sf17b16">883</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">3</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">600</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span class="sf17b16">579</span><span style="color: #000000; background-color: #efcb05; ">)")] </span><span class="sf17b16">PalliativeOrHospiceCareOrder</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b16">union</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">[("Intervention,</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Order:</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Hospice</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Care"</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">using</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">"Hospice</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Care</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">(2.16.840.1.113883.3.3157.1004.20</span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">")]</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b16">where</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">PalliativeOrHospiceCareOrder.authorDate<wbr>time</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">on</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">or</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">before</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b16">union</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">[("Intervention, </span><span class="sf17b16">Recommend</span><span style="color: #000000; background-color: #efcb05; ">ed: </span><span style="color: #000000; background-color: #efcb05; ">Hospice Care" using "</span><span style="color: #000000; background-color: #efcb05; ">Hospice Care (2.16.840.1.113883.3.</span><span class="sf17b16">3157</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span class="sf17b18">004</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">20</span><span style="color: #000000; background-color: #efcb05; ">)")] </span><span class="sf17b16">)</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">CareOrder</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b16">end</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">of</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Measurement Period</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">where </span><span class="sf17b16">CareOrder</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">authorDatetime</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">during</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">Measurement Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; </span><span class="sf17b16">or</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">exists ( </span><span style="color: #000000; background-color: #efcb05; ">[("Intervention, </span><span class="sf17b16">Perform</span><span style="color: #000000; background-color: #efcb05; ">ed: </span><span class="sf17b18">Palliative or </span><span style="color: #000000; background-color: #efcb05; ">Hospice Care" using "</span><span class="sf17b18">Palliative or </span><span style="color: #000000; background-color: #efcb05; ">Hospice Care (2.16.840.1.113883.3.</span><span class="sf17b16">600</span><span style="color: #000000; background-color: #efcb05; ">.1</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">1579</span><span style="color: #000000; background-color: #efcb05; ">)")] </span><span class="sf17b16">PalliativeOrHospiceCarePerformed</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">where </span><span class="sf17b16">PalliativeOrHospiceCarePerformed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">releva<wbr>ntPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">starts</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">on or before </span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; end of </span><span style="color: #000000; background-color: #efcb05; ">Measurement Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d444" href="#d444">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; or exists ( </span><span class="sf17b18">( </span><span style="color: #000000; background-color: #efcb05; ">[("</span><span class="sf17b16">Intervention, Performed</span><span style="color: #000000; background-color: #efcb05; ">: </span><span class="sf17b16">Palliative</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Care</span><span style="color: #000000; background-color: #efcb05; ">" using "</span><span class="sf17b16">Palliative</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Care</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(2.16.840.1.113762.1.4.1111.16</span><span class="sf17b16">2</span><span style="color: #000000; background-color: #efcb05; ">)")]</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; or exists ( </span><span style="color: #000000; background-color: #efcb05; ">[("</span><span class="sf17b16">Diagnosis</span><span style="color: #000000; background-color: #efcb05; ">: </span><span class="sf17b16">All</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Primary and Secondary Cancer</span><span style="color: #000000; background-color: #efcb05; ">" using "</span><span class="sf17b16">All</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Primary</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">and Secondary Cancer </span><span style="color: #000000; background-color: #efcb05; ">(2.16.840.1.113762.1.4.1111.16</span><span class="sf17b16">1</span><span style="color: #000000; background-color: #efcb05; ">)")] </span><span class="sf17b16">CancerDiagnosis</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b16">union</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">[("Intervention,</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Performed:</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">Hospice</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">Care" using "Hospice Care (</span><span style="color: #000000; background-color: #efcb05; ">2</span><span class="sf17b18">.16.840.1.113883.3.3157.1004.20)")]</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">)</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">CarePerformRecommend</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; </span><span class="sf17b16">where</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">CancerDiagnosis.prevalencePeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">starts</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">2</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">years</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">or</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">less</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">before</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b16">where</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">CarePerformRecommend.relevantPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">overlaps</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">Measurement Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; </span><span class="sf17b16">end</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">of </span><span style="color: #000000; background-color: #efcb05; ">Measurement Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d445" href="#d445">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; or exists ( [("Diagnosis: </span><span class="sf17b18">All Primary and Secondary Cancer" using "All Primary and Secondary Cancer (2.16.840.1.113762.1.4.1111.161)")] Cancer</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; or exists ( [("Diagnosis: </span><span style="color: #000000; background-color: #efcb05; ">Sickle Cell Disease and Related Blood Disorders" using "Sickle Cell Disease and Related Blood Disorders (2.16.840.1.113762.1.4.1029.35)")] SickleCell</span><span class="sf17b18">Diagnosis</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Cancer.prevalencePeriod starts 1 year or less before start of Measurement Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; where SickleCell</span><span class="sf17b18">Diagnosis</span><span style="color: #000000; background-color: #efcb05; ">.prevalencePeriod overlaps Measurement Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or Cancer.prevalencePeriod starts during Measurement Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; )</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; or exists ( [("Diagnosis: </span><span style="color: #000000; background-color: #efcb05; ">Sickle Cell Disease and Related Blood Disorders" using "Sickle Cell Disease and Related Blood Disorders (2.16.840.1.113762.1.4.1029.35)")] SickleCell</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where SickleCell</span><span style="color: #000000; background-color: #efcb05; ">.prevalencePeriod overlaps Measurement Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">or SickleCell.authorDatetime during Measurement Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Numerator:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Numerator:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d446" href="#d446">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; exists </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d447" href="#d447">.</a></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">exists </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d448" href="#d448">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">if Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d449" href="#d449">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d450" href="#d450">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d451" href="#d451">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d452" href="#d452">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d453" href="#d453">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d454" href="#d454">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d455" href="#d455">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d456" href="#d456">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d457" href="#d457">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d458" href="#d458">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d459" href="#d459">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d460" href="#d460">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d461" href="#d461">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d462" href="#d462">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d463" href="#d463">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d464" href="#d464">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d465" href="#d465">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d466" href="#d466">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d467" href="#d467">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d468" href="#d468">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d469" href="#d469">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d470" href="#d470">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d471" href="#d471">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d472" href="#d472">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d473" href="#d473">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d474" href="#d474">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d475" href="#d475">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d476" href="#d476">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)&lt; 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */ then { </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d477" href="#d477">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d478" href="#d478">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d479" href="#d479">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d480" href="#d480">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d481" href="#d481">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d482" href="#d482">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d483" href="#d483">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d484" href="#d484">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d485" href="#d485">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d486" href="#d486">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d487" href="#d487">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d488" href="#d488">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d489" href="#d489">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">] } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d490" href="#d490">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*First interval from start of overall period to first gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/ { Interval[start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d491" href="#d491">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d492" href="#d492">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d493" href="#d493">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d494" href="#d494">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d495" href="#d495">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d496" href="#d496">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d497" href="#d497">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d498" href="#d498">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d499" href="#d499">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d500" href="#d500">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d501" href="#d501">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d502" href="#d502">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d503" href="#d503">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">], start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d504" href="#d504">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d505" href="#d505">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d506" href="#d506">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d507" href="#d507">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d508" href="#d508">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d509" href="#d509">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d510" href="#d510">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d511" href="#d511">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d512" href="#d512">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d513" href="#d513">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d514" href="#d514">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d515" href="#d515">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d516" href="#d516">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d517" href="#d517">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d518" href="#d518">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d519" href="#d519">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d520" href="#d520">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d521" href="#d521">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d522" href="#d522">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d523" href="#d523">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d524" href="#d524">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d525" href="#d525">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d526" href="#d526">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d527" href="#d527">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d528" href="#d528">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d529" href="#d529">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d530" href="#d530">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d531" href="#d531">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[0]) }</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; union </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; union </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d532" href="#d532">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */ </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">*/ </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d533" href="#d533">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d534" href="#d534">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d535" href="#d535">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d536" href="#d536">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d537" href="#d537">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d538" href="#d538">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d539" href="#d539">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d540" href="#d540">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d541" href="#d541">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d542" href="#d542">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d543" href="#d543">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d544" href="#d544">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d545" href="#d545">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d546" href="#d546">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d547" href="#d547">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d548" href="#d548">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d549" href="#d549">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d550" href="#d550">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d551" href="#d551">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d552" href="#d552">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d553" href="#d553">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d554" href="#d554">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d555" href="#d555">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d556" href="#d556">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d557" href="#d557">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d558" href="#d558">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d559" href="#d559">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d560" href="#d560">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7 Gap</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; let NextGapIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d561" href="#d561">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d562" href="#d562">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d563" href="#d563">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d564" href="#d564">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d565" href="#d565">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d566" href="#d566">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d567" href="#d567">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d568" href="#d568">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d569" href="#d569">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d570" href="#d570">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d571" href="#d571">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d572" href="#d572">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d573" href="#d573">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d574" href="#d574">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d575" href="#d575">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d576" href="#d576">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d577" href="#d577">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d578" href="#d578">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d579" href="#d579">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d580" href="#d580">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d581" href="#d581">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d582" href="#d582">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d583" href="#d583">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d584" href="#d584">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d585" href="#d585">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d586" href="#d586">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d587" href="#d587">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d588" href="#d588">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7, Gap)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return if NextGapIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d589" href="#d589">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d590" href="#d590">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d591" href="#d591">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d592" href="#d592">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d593" href="#d593">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d594" href="#d594">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d595" href="#d595">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d596" href="#d596">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d597" href="#d597">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d598" href="#d598">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d599" href="#d599">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d600" href="#d600">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d601" href="#d601">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d602" href="#d602">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d603" href="#d603">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d604" href="#d604">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d605" href="#d605">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d606" href="#d606">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d607" href="#d607">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d608" href="#d608">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d609" href="#d609">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d610" href="#d610">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d611" href="#d611">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d612" href="#d612">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d613" href="#d613">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d614" href="#d614">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d615" href="#d615">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d616" href="#d616">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7)then Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, start of </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d617" href="#d617">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d618" href="#d618">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d619" href="#d619">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d620" href="#d620">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d621" href="#d621">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d622" href="#d622">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d623" href="#d623">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">) CompleteOpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let NextIndex: IndexOf(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let NextIndex: IndexOf(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d624" href="#d624">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d625" href="#d625">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d626" href="#d626">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d627" href="#d627">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d628" href="#d628">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d629" href="#d629">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d630" href="#d630">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">), CompleteOpioidPeriod)+ 1</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; where NextIndex &lt; Length(</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; where NextIndex &lt; Length(</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d631" href="#d631">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d632" href="#d632">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d633" href="#d633">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d634" href="#d634">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d635" href="#d635">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d636" href="#d636">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d637" href="#d637">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">))</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; end of CompleteOpioidPeriod, start of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d638" href="#d638">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">collapse ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d639" href="#d639">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d640" href="#d640">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d641" href="#d641">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d642" href="#d642">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d643" href="#d643">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d644" href="#d644">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; return OpioidPeriod.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">sort by low</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where duration in days of Gaps</span><span class="sf17b16">inActiveOpioidPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)[NextIndex]) Gaps</span><span class="sf17b16">MoreThanSevenDays</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where duration in days of Gaps</span><span class="sf17b16">MoreThanSevenDays</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; 7[NextGapIndex]) </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; else Interval ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of Gap, </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of Gap, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; end of </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d645" href="#d645">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Interval[start of First(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d646" href="#d646">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d647" href="#d647">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d648" href="#d648">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d649" href="#d649">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d650" href="#d650">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d651" href="#d651">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; sort by start of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">, </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of Last(</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of Last(</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d652" href="#d652">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d653" href="#d653">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d654" href="#d654">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d655" href="#d655">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d656" href="#d656">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } OpioidPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } OpioidPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sort by </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; sort by </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d657" href="#d657">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end of periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; end of periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; ).periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">).periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">]] Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; let Med</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; let Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: ( </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d658" href="#d658">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">[("Medication, Order: Opioid Medications" using "Opioid Medications (2.16.840.1.113883.3.3157.1004.26)")] OpioidMedicationOrder</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d659" href="#d659">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](OpioidMedicat<wbr>ionOrder)overlaps Measurement Period Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>MedicationOrder)overlaps Measurement Period Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d660" href="#d660">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">: Interval[start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod, if </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">end of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b18">relevantPeriod = maximum DateTime</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; and OpioidMed.</span><span style="color: #000000; background-color: #efcb05; ">daysSupplied is not null then start of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod + Quantity { value: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.daysSupplied, unit: 'd' } </span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d661" href="#d661">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end of OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod](Opioid<wbr>)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; intersect Measurement Period,</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d662" href="#d662">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">: Opioid</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; } Opioid</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; } Opioid</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d663" href="#d663">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">P</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; where Opioid.periodInM</span><span class="sf17b16">easurementPeriod</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;during Period</span><span class="sf17b18">sWithAllowedGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d664" href="#d664">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; period: Period</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; period: Period</span><span class="sf17b18">sWithAllowedGaps</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmd: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; cmd: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d665" href="#d665">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">Sum((collapse(Periods))Period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all duration in days of Period</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; return all duration in days of Period</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d666" href="#d666">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span style="color: #000000; background-color: #efcb05; ">s Med</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">)(Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s Med</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">P</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; return Med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.periodInM</span><span class="sf17b16">easurementPeriod</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d667" href="#d667">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; } Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; } Period</span><span class="sf17b18">sWithGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Period</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Period</span><span class="sf17b18">sWithGaps</span><span style="color: #000000; background-color: #efcb05; ">.cmd &gt;= 90 Period</span><span class="sf17b18">WithAndWithoutGaps</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let ScriptsMMEDays: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let ScriptsMMEDays: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d668" href="#d668">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">medications OpioidMed</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">medications OpioidMed</span><span class="sf17b18">ication</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let dosesPerDay: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let dosesPerDay: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d669" href="#d669">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">case</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">case</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Once daily (qualifier value)" ("SNOMEDCT Code (229797004)")) then 1.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Once daily (qualifier value)" ("SNOMEDCT Code (229797004)")) then 1.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Twice a day (qualifier value)" ("SNOMEDCT Code (229799001)")) then 2.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Twice a day (qualifier value)" ("SNOMEDCT Code (229799001)")) then 2.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Three times daily (qualifier value)" ("SNOMEDCT Code (229798009)")) then 3.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Three times daily (qualifier value)" ("SNOMEDCT Code (229798009)")) then 3.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Four times daily (qualifier value)" ("SNOMEDCT Code (307439001)")) then 4.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Four times daily (qualifier value)" ("SNOMEDCT Code (307439001)")) then 4.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every twenty four hours (qualifier value)" ("SNOMEDCT Code (396125000)")) then 1.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every twenty four hours (qualifier value)" ("SNOMEDCT Code (396125000)")) then 1.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every twelve hours (qualifier value)" ("SNOMEDCT Code (307470009)")) then 2.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every twelve hours (qualifier value)" ("SNOMEDCT Code (307470009)")) then 2.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every thirty six hours (qualifier value)" ("SNOMEDCT Code (396126004)")) then 0.67</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every thirty six hours (qualifier value)" ("SNOMEDCT Code (396126004)")) then 0.67</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every eight hours (qualifier value)" ("SNOMEDCT Code (307469008)")) then 3.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every eight hours (qualifier value)" ("SNOMEDCT Code (307469008)")) then 3.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every four hours (qualifier value)" ("SNOMEDCT Code (225756002)")) then 6.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every four hours (qualifier value)" ("SNOMEDCT Code (225756002)")) then 6.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every six hours (qualifier value)" ("SNOMEDCT Code (307468000)")) then 4.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every six hours (qualifier value)" ("SNOMEDCT Code (307468000)")) then 4.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every seventy two hours (qualifier value)" ("SNOMEDCT Code (396143001)")) then 0.34</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every seventy two hours (qualifier value)" ("SNOMEDCT Code (396143001)")) then 0.34</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every forty eight hours (qualifier value)" ("SNOMEDCT Code (396131002)")) then 0.5</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every forty eight hours (qualifier value)" ("SNOMEDCT Code (396131002)")) then 0.5</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every eight to twelve hours (qualifier value)" ("SNOMEDCT Code (396140003)")) then 2.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every eight to twelve hours (qualifier value)" ("SNOMEDCT Code (396140003)")) then 2.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every six to eight hours (qualifier value)" ("SNOMEDCT Code (396139000)")) then 3.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every six to eight hours (qualifier value)" ("SNOMEDCT Code (396139000)")) then 3.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every three to four hours (qualifier value)" ("SNOMEDCT Code (225754004)")) then 6.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every three to four hours (qualifier value)" ("SNOMEDCT Code (225754004)")) then 6.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every three to six hours (qualifier value)" ("SNOMEDCT Code (396127008)")) then 4.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every three to six hours (qualifier value)" ("SNOMEDCT Code (396127008)")) then 4.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Every two to four hours (qualifier value)" ("SNOMEDCT Code (225752000)")) then 6.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Every two to four hours (qualifier value)" ("SNOMEDCT Code (225752000)")) then 6.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "One to four times a day (qualifier value)" ("SNOMEDCT Code (396109005)")) then 4.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "One to four times a day (qualifier value)" ("SNOMEDCT Code (396109005)")) then 4.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "One to three times a day (qualifier value)" ("SNOMEDCT Code (396108002)")) then 3.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "One to three times a day (qualifier value)" ("SNOMEDCT Code (396108002)")) then 3.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "One to two times a day (qualifier value)" ("SNOMEDCT Code (396107007)")) then 2.0</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "One to two times a day (qualifier value)" ("SNOMEDCT Code (396107007)")) then 2.0</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; when frequency ~ (code "Two to four times a day (qualifier value)" ("SNOMEDCT Code (396111001)")) then 4.0 </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; when frequency ~ (code "Two to four times a day (qualifier value)" ("SNOMEDCT Code (396111001)")) then 4.0 </span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; else null </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; else null </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d670" href="#d670">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">end(OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.frequency),</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">end(OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.frequency),</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; MME: </span><span class="sf17b18">singleton from </span><span style="color: #000000; background-color: #efcb05; ">( OpioidConversionLogic.CalculateMorphine<wbr>MilligramEquivalents</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">{ {</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; MME: </span><span style="color: #000000; background-color: #efcb05; ">( OpioidConversionLogic.CalculateMorphine<wbr>MilligramEquivalents</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">{ {</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rxNormCode: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.code,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; rxNormCode: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.code,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; doseQuantity: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.dosage,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; doseQuantity: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.dosage,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dosesPerDay: dosesPerDay</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; dosesPerDay: dosesPerDay</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d671" href="#d671">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } }</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; } } )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; ),</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; ),</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d672" href="#d672">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">Period: </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">Period: </span><span class="sf17b18">Interval[start of </span><span style="color: #000000; background-color: #efcb05; ">OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.relevantPeriod</span><span class="sf17b18">,</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">if OpioidMedication.daysSupplied is not null then start of OpioidMedication.relevantPeriod + Quantity { value: OpioidMedication.daysSupplied, unit: 'd' } </span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; else </span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">end of OpioidMedication.relevantPeriod](Opioid<wbr>Medication)</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intersect period</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; intersect period</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d673" href="#d673">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rxNormCode: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.code,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; rxNormCode: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.code,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; authortime: OpioidMed</span><span style="color: #000000; background-color: #efcb05; ">.authorDatetime,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; authortime: OpioidMed</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">.authorDatetime,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectivePeriod: med</span><span style="color: #000000; background-color: #efcb05; ">Period,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; effectivePeriod: med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">Period,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; conversionFactor: </span><span style="color: #000000; background-color: #efcb05; ">MME.conversionFactor</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; conversionFactor: </span><span class="sf17b18">singleton from ( </span><span style="color: #000000; background-color: #efcb05; ">MME.conversionFactor</span><span class="sf17b18">&nbsp;)</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; daysInPeriod: </span><span class="sf17b18">Timing.DaysInPeriod</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b16">medPeriod</span><span style="color: #000000; background-color: #efcb05; ">)</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; daysInPeriod: </span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b16">&nbsp;expand { period } per day </span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">&nbsp;DayInterval</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mme: </span><span style="color: #000000; background-color: #efcb05; ">MME.MME</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; return all start of DayInterval(medicationPeriod)</span><span style="color: #000000; background-color: #efcb05; ">,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; }(Period</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span style="color: #000000; background-color: #efcb05; ">s, Period</span><span style="color: #000000; background-color: #efcb05; ">.period)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; mme: </span><span class="sf17b18">Sum(</span><span style="color: #000000; background-color: #efcb05; ">MME.MME</span><span class="sf17b18">)</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; }(Period</span><span class="sf17b18">WithAndWithoutGaps</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s,<wbr> Period</span><span class="sf17b18">WithAndWithoutGaps</span><span style="color: #000000; background-color: #efcb05; ">.period)</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; period: Period</span><span style="color: #000000; background-color: #efcb05; ">.period,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; med</span><span style="color: #000000; background-color: #efcb05; ">s: Period</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span style="color: #000000; background-color: #efcb05; ">s,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; period: Period</span><span class="sf17b18">WithAndWithoutGaps</span><span style="color: #000000; background-color: #efcb05; ">.period,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmd: Period</span><span style="color: #000000; background-color: #efcb05; ">.cmd,</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s: Period</span><span class="sf17b18">WithAndWithoutGaps</span><span style="color: #000000; background-color: #efcb05; ">.med</span><span class="sf17b18">ication</span><span style="color: #000000; background-color: #efcb05; ">s,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; cmd: Period</span><span class="sf17b18">WithAndWithoutGaps</span><span style="color: #000000; background-color: #efcb05; ">.cmd,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mmeDays: ScriptsMMEDays,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; mmeDays: ScriptsMMEDays,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mmeSumDays: </span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; mmeSumDays: </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d674" href="#d674">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">( distinct</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">flatten</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">scriptsMMEDays MMEDays</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">( distinct</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">flatten</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">scriptsMMEDays MMEDays</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all MMEDays.daysInPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; return all MMEDays.daysInPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d675" href="#d675">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; )</span><span class="sf17b18">)</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;Day</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">)</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;)</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;Day</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; let totalMME: Sum(scriptsMMEDays ScriptMMEDays</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; let totalMME: Sum(scriptsMMEDays ScriptMMEDays</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where Day in ScriptMMEDays.daysInPeriod</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; where Day in ScriptMMEDays.daysInPeriod</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all ScriptMMEDays.mme</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; return all ScriptMMEDays.mme</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; return {</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; return {</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Day: Day,</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; Day: Day,</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; totalMME: totalMME</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; totalMME: totalMME</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; }(ScriptsMMEDays)</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; }(ScriptsMMEDays)</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d676" href="#d676">.</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; } Period</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; } Period</span><span class="sf17b18">WithMMESum</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; where Count(Period</span><span style="color: #000000; background-color: #efcb05; ">.mmeSumDays MMESum</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; where Count(Period</span><span class="sf17b18">WithMMESum</span><span style="color: #000000; background-color: #efcb05; ">.mmeSumDays MMESum</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; where MMESum.totalMME.value &gt;= 90</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; where MMESum.totalMME.value &gt;= 90</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; &nbsp; &nbsp; &nbsp; )&gt;= 90</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">&nbsp; )&gt;= 90</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Numerator Exclusions:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Numerator Exclusions:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator Exceptions:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Denominator Exceptions:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">=======================================<wbr>=======================================<wbr>=======================================<wbr>=======================================<wbr>=================</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Stratification:</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">Stratification:</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
<td class="ln"></td><td class="sf3b2"><code><span class="sf3b2">None</span></code></td>
</tr>
<tr>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln"></td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
</tbody>
</table>
</body>
</html>
